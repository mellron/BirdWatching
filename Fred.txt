public void Main()
{
    string filePath = Dts.Connections["Contractors.txt"].AcquireConnection(Dts.Transaction) as string;
    int retryCount = 3;
    bool success = false;

    for (int i = 0; i < retryCount; i++)
    {
        try
        {
            using (StreamWriter sw = File.AppendText(filePath))
            {
                sw.WriteLine(Dts.Variables["User::RowCount"].Value.ToString());
            }
            success = true;
            break; // Exit the loop if writing succeeds
        }
        catch (IOException ex)
        {
            Dts.Events.FireWarning(0, "ScriptTask", $"Failed to write to file. Attempt {i + 1} of {retryCount}. Error: {ex.Message}", "", 0);
            System.Threading.Thread.Sleep(5000); // Wait 5 seconds before retrying
        }
    }

    if (!success)
    {
        Dts.TaskResult = (int)ScriptResults.Failure;
    }
    else
    {
        Dts.TaskResult = (int)ScriptResults.Success;
    }
}